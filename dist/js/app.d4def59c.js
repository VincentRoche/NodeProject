(function(e){function t(t){for(var a,n,i=t[0],l=t[1],c=t[2],d=0,m=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&m.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);u&&u(t);while(m.length)m.shift()();return o.push.apply(o,c||[]),s()}function s(){for(var e,t=0;t<o.length;t++){for(var s=o[t],a=!0,i=1;i<s.length;i++){var l=s[i];0!==r[l]&&(a=!1)}a&&(o.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},r={app:0},o=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=l;o.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},1:function(e,t){},"1b2f":function(e,t,s){e.exports=s.p+"img/lagaf.f7a36579.jpg"},"56d7":function(e,t,s){"use strict";s.r(t);s("e260"),s("e6cf"),s("cca6"),s("a79d");var a=s("2b0e"),r=s("8c4f"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",[s("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[s("v-toolbar-title",[s("router-link",{staticStyle:{"text-decoration":"none",color:"white"},attrs:{to:"/"}},[e._v("Le Juste Prix")])],1),s("v-spacer"),s("span",{staticClass:"mr-2"},[e._v(e._s(e.$store.state.session.username))]),e.$store.getters["session/isLoggedIn"]?s("v-btn",{attrs:{text:""},on:{click:e.logout}},[s("span",{staticClass:"mr-2"},[e._v("Log out")]),s("v-icon",[e._v("mdi-door")])],1):e._e()],1),s("v-content",[s("router-view")],1)],1)},n=[],i=(s("d3b7"),s("96cf"),{name:"App",components:{},data:function(){return{}},methods:{logout:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.axios.post("/logout",{sessionId:this.$store.state.session.sessionId}));case 2:this.$store.commit("session/logout"),this.$router.push("/");case 4:case"end":return e.stop()}}),null,this)}}}),l=i,c=s("2877"),u=s("6544"),d=s.n(u),m=s("7496"),p=s("40dc"),g=s("8336"),v=s("a75b"),h=s("132d"),f=s("2fa4"),b=s("2a7f"),y=Object(c["a"])(l,o,n,!1,null,null,null),w=y.exports;d()(y,{VApp:m["a"],VAppBar:p["a"],VBtn:g["a"],VContent:v["a"],VIcon:h["a"],VSpacer:f["a"],VToolbarTitle:b["b"]});var x=s("f309");a["a"].use(x["a"]);var _=new x["a"]({}),k=s("bc3a"),C=s.n(k),V=s("a7fe"),S=s.n(V),$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{staticClass:"mt-6",attrs:{fluid:"","text-center":""}},[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{md:"8"}},[a("v-img",{attrs:{src:s("1b2f"),"max-height":"400",contain:""}})],1)],1),this.$store.getters["session/isLoggedIn"]?[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{sm:"6",md:"4",lg:"2"}},[a("p",{staticClass:"font-weight-medium"},[e._v("Join a game:")]),e.$route.query.error?a("v-alert",{attrs:{type:"error"}},[e._v(e._s(e.errors[e.$route.query.error]))]):e._e(),a("v-text-field",{attrs:{label:"Game number",solo:"",required:"",type:"number",disabled:e.joinLoading},scopedSlots:e._u([{key:"append",fn:function(){return[a("v-btn",{attrs:{color:"primary",fab:"",small:"",loading:e.joinLoading},on:{click:e.joinGame}},[a("v-icon",[e._v("mdi-send")])],1)]},proxy:!0}]),model:{value:e.gameNumber,callback:function(t){e.gameNumber=t},expression:"gameNumber"}})],1)],1),a("v-row",{attrs:{justify:"center"}},[a("v-col",[a("v-btn",{attrs:{to:"/lobby/new",disabled:e.joinLoading}},[e._v(" Create a game ")])],1)],1)]:[a("v-row",{attrs:{justify:"center"}},[a("v-col",{attrs:{sm:"4",lg:"2"}},[a("v-btn",{attrs:{large:"",block:"",color:"primary",to:"/login"}},[e._v("Log in")])],1),a("v-col",{attrs:{sm:"4",lg:"2"}},[a("v-btn",{attrs:{large:"",block:"",color:"primary",to:"/newAccount"}},[e._v("Create an account")])],1)],1)]],2)},P=[],G={data:function(){return{gameNumber:"",joinLoading:!1,errors:{errorGameFull:"Sorry, this game is full.",errorNotExist:"There is no game with the number you entered.",errorAlreadyStarted:"This game is already started."}}},methods:{joinGame:function(){console.log("joinGame ".concat(this.gameNumber)),this.joinLoading=!0,this.$router.push("/lobby/".concat(this.gameNumber))}}},A=G,j=s("0798"),N=s("62ad"),R=s("a523"),T=s("adda"),I=s("0fd9"),D=s("8654"),L=Object(c["a"])(A,$,P,!1,null,null,null),O=L.exports;d()(L,{VAlert:j["a"],VBtn:g["a"],VCol:N["a"],VContainer:R["a"],VIcon:h["a"],VImg:T["a"],VRow:I["a"],VTextField:D["a"]});var F=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[s("v-card",{staticClass:"elevation-12"},[s("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[s("v-toolbar-title",[e._v("New account")])],1),s("v-card-text",[s("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[e.errors.length?s("v-alert",{attrs:{type:"error"}},[e._v(e._s(e.errors.join(" ")))]):e._e(),s("v-text-field",{attrs:{label:"Username",name:"username","prepend-icon":"mdi-account",type:"text",rules:e.usernameRules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),s("v-text-field",{attrs:{id:"passwordConfirm",label:"Confirm password",name:"passwordConfirm","prepend-icon":"mdi-lock",type:"password"},model:{value:e.passwordVerif,callback:function(t){e.passwordVerif=t},expression:"passwordVerif"}})],1)],1),s("v-card-actions",[s("v-btn",{attrs:{text:"",to:"/login"}},[e._v("Use an existing account")]),s("v-spacer"),s("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.submitNewAccount}},[e._v("Create account")])],1)],1)],1)],1)],1)},E=[],U={data:function(){return{valid:!0,username:"",usernameRules:[function(e){return!!e||"Username is required"}],password:"",passwordRules:[function(e){return!!e||"Password is required"}],passwordVerif:"",loading:!1,errors:[]}},created:function(){this.$store.getters["session/isLoggedIn"]&&this.$router.push("/")},methods:{submitNewAccount:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$refs.form.validate()){t.next=12;break}if(this.password===this.passwordVerif){t.next=5;break}this.errors.push("The two passwords do not match."),t.next=12;break;case 5:return this.loading=!0,t.next=8,regeneratorRuntime.awrap(this.axios.post("/acc",{username:this.username,password:this.password}));case 8:e=t.sent,this.errors=[],this.loading=!1,e.data instanceof Array?this.errors=e.data:(this.$store.commit("session/login",{sessionId:e.data,username:this.username}),this.$router.push("/"));case 12:case"end":return t.stop()}}),null,this)}}},q=U,B=s("b0af"),J=s("99d9"),M=s("4bd4"),z=s("71d9"),W=Object(c["a"])(q,F,E,!1,null,null,null),Y=W.exports;d()(W,{VAlert:j["a"],VBtn:g["a"],VCard:B["a"],VCardActions:J["a"],VCardText:J["c"],VCol:N["a"],VContainer:R["a"],VForm:M["a"],VRow:I["a"],VSpacer:f["a"],VTextField:D["a"],VToolbar:z["a"],VToolbarTitle:b["b"]});var H=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[s("v-card",{staticClass:"elevation-12"},[s("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[s("v-toolbar-title",[e._v("Log in")])],1),s("v-card-text",[s("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[e.errors.length?s("v-alert",{attrs:{type:"error"}},[e._v(e._s(e.errors.join(" ")))]):e._e(),s("v-text-field",{attrs:{label:"Username",name:"username","prepend-icon":"mdi-account",type:"text",rules:e.usernameRules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),s("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password",rules:e.passwordRules},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),s("v-card-actions",[s("v-btn",{attrs:{text:"",to:"/newAccount"}},[e._v("Create an account")]),s("v-spacer"),s("v-btn",{attrs:{color:"primary",loading:e.loading},on:{click:e.tryToLogin}},[e._v("Log in")])],1)],1)],1)],1)],1)},K=[],Q={data:function(){return{valid:!0,username:"",usernameRules:[function(e){return!!e||"Username is required"}],password:"",passwordRules:[function(e){return!!e||"Password is required"}],loading:!1,errors:[]}},methods:{tryToLogin:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$refs.form.validate()){t.next=8;break}return this.loading=!0,t.next=4,regeneratorRuntime.awrap(this.axios.post("/log",{username:this.username,password:this.password}));case 4:e=t.sent,this.errors=[],this.loading=!1,e.data instanceof Array?this.errors=e.data:(this.$store.commit("session/login",{sessionId:e.data,username:this.username}),this.$router.push("/"));case 8:case"end":return t.stop()}}),null,this)}}},X=Q,Z=Object(c["a"])(X,H,K,!1,null,null,null),ee=Z.exports;d()(Z,{VAlert:j["a"],VBtn:g["a"],VCard:B["a"],VCardActions:J["a"],VCardText:J["c"],VCol:N["a"],VContainer:R["a"],VForm:M["a"],VRow:I["a"],VSpacer:f["a"],VTextField:D["a"],VToolbar:z["a"],VToolbarTitle:b["b"]});var te=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{fluid:"","fill-height":"","pa-0":""}},[s("v-row",{staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12",md:"8",lg:"9","align-self":"stretch"}},[s("v-card",{staticClass:"pa-6",attrs:{height:"100%",tile:"",flat:""}},[s("v-card-title",{staticClass:"headline"},[e._v("Game number: "+e._s(e.gameNumber))]),s("v-card-subtitle",[e._v("Give this number to people you want to play with.")]),s("v-card-text",{staticClass:"mt-8"},[s("p",{staticClass:"body-1"},[e._v(" Players: ")]),s("div",{staticClass:"d-flex flex-wrap"},e._l(this.players,(function(t){return s("v-card",{key:t.name,staticClass:"pa-2 ma-2",attrs:{outlined:""}},[e._v(" "+e._s(t.name)+" ")])})),1)])],1)],1),s("v-col",{attrs:{cols:"12",md:"4",lg:"3","align-self":"stretch"}},[s("v-card",{staticClass:"grey lighten-3 pa-6",attrs:{height:"100%",tile:""}},[s("v-card-title",[e._v("Game options")]),s("v-card-text",[s("v-slider",{staticClass:"pt-1",attrs:{max:"50",min:Math.max(2,e.players.length),"hide-details":"",label:"Max players","thumb-label":"always","thumb-size":"24",disabled:!e.isGameAdmin},scopedSlots:e._u([e.isGameAdmin?null:{key:"append",fn:function(){return[s("p",{staticClass:"ma-0 pt-1"},[e._v(e._s(e.maxPlayers))])]},proxy:!0}],null,!0),model:{value:e.maxPlayers,callback:function(t){e.maxPlayers=t},expression:"maxPlayers"}}),s("v-slider",{staticClass:"pt-5",attrs:{max:"20",min:"1","hide-details":"",label:"Rounds","thumb-label":"always","thumb-size":"24",disabled:!e.isGameAdmin},scopedSlots:e._u([e.isGameAdmin?null:{key:"append",fn:function(){return[s("p",{staticClass:"ma-0 pt-1"},[e._v(e._s(e.rounds))])]},proxy:!0}],null,!0),model:{value:e.rounds,callback:function(t){e.rounds=t},expression:"rounds"}}),s("v-slider",{staticClass:"pt-5",attrs:{max:"60",min:"2","hide-details":"",label:"Round duration (s)","thumb-label":"always","thumb-size":"24",disabled:!e.isGameAdmin},scopedSlots:e._u([e.isGameAdmin?null:{key:"append",fn:function(){return[s("p",{staticClass:"ma-0 pt-1"},[e._v(e._s(e.roundDuration))])]},proxy:!0}],null,!0),model:{value:e.roundDuration,callback:function(t){e.roundDuration=t},expression:"roundDuration"}})],1),s("v-card-actions",{staticClass:"my-6"},[s("v-btn",{attrs:{"x-large":"",block:"",rounded:"",color:"success",disabled:!e.isGameAdmin||e.players.length<2,loading:e.gameStarting},on:{click:e.startGame}},[e._v(" "+e._s(e.isGameAdmin?"Start game":"Waiting...")+" ")])],1)],1)],1)],1)],1)},se=[],ae=(s("d81d"),{data:function(){return{socket:null,gameNumber:0,players:[],maxPlayers:30,rounds:5,roundDuration:10,isGameAdmin:!1,gameStarting:!1}},created:function(){var e=this;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:if(this.$store.getters["session/isLoggedIn"]){t.next=4;break}return console.log("Lobby: not logged in"),this.$router.push("/"),t.abrupt("return");case 4:this.socket=this.$store.getters["session/gameSocket"],this.socket.on("players",(function(t){e.players=t.map((function(e){return{name:e}})),console.log("Player list updated")})),this.socket.on("GameStart",(function(t){console.log("GameStart"),e.$store.commit("game/setGameSettings",{rounds:t.settings.rounds,roundDuration:t.settings.roundDuration}),e.$store.commit("game/setPlayers",{players:t.players}),e.$router.push("/round")})),"new"===this.$route.params.gameNumber?(this.socket.emit("hostGame"),console.log("hostGame"),this.socket.on("gameNumber",(function(t){t.gameNumber?(e.gameNumber=t.gameNumber,e.isGameAdmin=!0,console.log("gameNumber: ".concat(e.gameNumber))):console.log("Getting game number failed")}))):(this.gameNumber=this.$route.params.gameNumber,this.socket.emit("joinGame",{name:this.$store.state.session.username,gameNumber:this.gameNumber}),console.log("joinGame: ".concat(this.gameNumber)),this.socket.on("errorGameFull",(function(){e.$router.push("/?error=errorGameFull"),console.log("errorGameFull")})),this.socket.on("errorNotExist",(function(){e.$router.push("/?error=errorNotExist"),console.log("errorNotExist")})),this.socket.on("errorAlreadyStarted",(function(){e.$router.push("/?error=errorAlreadyStarted"),console.log("errorAlreadyStarted")})),this.socket.on("settingsUpdated",(function(t){e.maxPlayers=t.maxPlayers?t.maxPlayers:e.maxPlayers,e.rounds=t.rounds?t.rounds:e.rounds,e.roundDuration=t.roundDuration?t.roundDuration:e.roundDuration,console.log("settingsUpdated")})));case 8:case"end":return t.stop()}}),null,this)},destroyed:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:"/round"!==this.$route.path&&this.socket&&(this.socket.emit("leaveGame"),console.log("leaveGame (Lobby destroyed)"));case 1:case"end":return e.stop()}}),null,this)},watch:{maxPlayers:function(){this.updateSettings(1)},rounds:function(){this.updateSettings(2)},roundDuration:function(){this.updateSettings(3)}},methods:{startGame:function(){this.gameStarting=!0,this.socket.emit("GameStart"),console.log("GameStart")},updateSettings:function(e){if(this.isGameAdmin){var t={};1===e?t.maxPlayers=this.maxPlayers:2===e?t.rounds=this.rounds:3===e&&(t.roundDuration=this.roundDuration),this.socket.emit("settingsUpdate",t),console.log("settingsUpdate")}}}}),re=ae,oe=s("ba0d"),ne=Object(c["a"])(re,te,se,!1,null,null,null),ie=ne.exports;d()(ne,{VBtn:g["a"],VCard:B["a"],VCardActions:J["a"],VCardSubtitle:J["b"],VCardText:J["c"],VCardTitle:J["d"],VCol:N["a"],VContainer:R["a"],VRow:I["a"],VSlider:oe["a"]});var le=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{fluid:"","fill-height":"","pa-0":""}},[s("v-row",{staticStyle:{height:"100%"},attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"12",md:"8",lg:"9","align-self":"stretch"}},[s("v-card",{staticClass:"pa-6",attrs:{height:"100%",tile:"",flat:""}},[s("v-container",[s("v-row",{staticClass:"flex-nowrap",attrs:{"no-gutters":""}},[s("v-col",{attrs:{cols:"10"}},[s("v-card-title",{staticClass:"headline"},[e._v("What is the price of...")]),s("v-card-subtitle",{staticClass:"display-1 font-regular"},[e._v(e._s(e.itemName))])],1),s("v-col",{attrs:{"align-self":"end",align:"right"}},[s("v-progress-circular",{staticClass:"title",attrs:{rotate:-90,size:100,width:15,value:e.time/e.$store.state.game.roundDuration*100,color:e.time>3?"green":"red"}},[e._v(" "+e._s(e.time)+" ")])],1)],1),s("v-row",{attrs:{"no-gutters":""}},[s("v-col",[s("v-card-text",[s("p",{staticClass:"caption mb-1"},[e._v("Your price estimation:")]),s("v-text-field",{attrs:{label:"Estimated price",solo:"",required:"",autofocus:"",type:"number","hide-details":"",prefix:"€",disabled:e.answered},model:{value:e.estimatedPrice,callback:function(t){e.estimatedPrice=t},expression:"estimatedPrice"}}),s("v-btn",{staticClass:"mt-2",attrs:{color:"primary",block:"",disabled:e.answered},on:{click:e.sendPrice}},[e._v(" Send ")]),e.imageUrl?s("v-img",{staticClass:"mt-4",attrs:{src:e.imageUrl,contain:"","max-height":"600"},on:{load:e.ready}},[s("v-overlay",{staticClass:"text-center",attrs:{absolute:"",value:e.answer}},[s("p",{staticClass:"display-2"},[e._v("Answer:")]),s("p",{staticClass:"display-4"},[e._v("€ "+e._s(e.answer))])])],1):e._e()],1)],1)],1)],1)],1)],1),s("v-col",{attrs:{cols:"12",md:"4",lg:"3","align-self":"stretch"}},[s("v-card",{staticClass:"grey lighten-3 pa-6",attrs:{height:"100%",tile:""}},[s("v-card-title",[e._v("Round "+e._s(e.round)+" of "+e._s(e.$store.state.game.rounds))]),s("v-card-text",e._l(this.sortedPlayers,(function(t,a){return s("v-card",{key:t.name,staticClass:"my-2",attrs:{outlined:""}},[s("v-container",[s("v-row",{staticClass:"flex-nowrap",attrs:{align:"center","no-gutters":""}},[s("v-col",{staticClass:"text-center",attrs:{cols:"2"}},[s("v-chip",[e._v(e._s(a+1))])],1),s("v-col",[s("p",{staticClass:"mb-0 subtitle-1"},[e._v(e._s(t.name)+" "),e.lastAnswers[t.name]?s("v-chip",{attrs:{"x-small":"",color:"purple",dark:""}},[e._v(e._s(e.lastAnswers[t.name]))]):e._e()],1),s("p",{staticClass:"mb-0 subtitle-2"},[e._v(e._s(t.score))])])],1)],1)],1)})),1)],1)],1)],1),s("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.showFinalResults,callback:function(t){e.showFinalResults=t},expression:"showFinalResults"}},[s("v-card",[s("v-toolbar",{attrs:{dark:"",color:"primary"}},[s("v-toolbar-title",[e._v("Final results")]),s("v-spacer"),s("v-toolbar-items",[s("v-btn",{attrs:{dark:"",text:""},on:{click:e.quit}},[e._v("Home")])],1)],1),s("v-container",[s("v-row",e._l(this.sortedPlayers,(function(t,a){return s("v-col",{key:t.name,attrs:{cols:"12",sm:"6",md:"4",lg:"3"}},[s("v-card",{attrs:{outlined:""}},[s("v-container",[s("v-row",{staticClass:"flex-nowrap",attrs:{align:"center","no-gutters":""}},[s("v-col",{staticClass:"text-center",attrs:{cols:"2"}},[s("v-chip",{class:e.podiumColors[a+1]},[e._v(e._s(a+1))])],1),s("v-col",[s("p",{staticClass:"mb-0 subtitle-1"},[e._v(e._s(t.name))]),s("p",{staticClass:"mb-0 subtitle-2"},[e._v("Score: "+e._s(t.score))])])],1)],1)],1)],1)})),1)],1)],1)],1)],1)},ce=[],ue=(s("a4d3"),s("e01a"),s("d28b"),s("fb6a"),s("4e827"),s("b0c0"),s("3ca3"),s("ddb0"),{data:function(){return{socket:null,itemName:"",imageUrl:"",round:1,estimatedPrice:"",answer:0,answered:!0,lastAnswers:[],time:0,players:[{id:0,name:"Jacques Chirac",score:77},{id:1,name:"Valéry Giscard d'Estaing",score:33},{id:4,name:"Georges Pompidou",score:55}],showFinalResults:!1,podiumColors:{1:"amber",2:"grey",3:"brown lighten-2"}}},created:function(){var e=this;if(!this.$store.getters["session/isLoggedIn"])return console.log("Round: not logged in"),void this.$router.push("/");this.socket=this.$store.getters["session/gameSocket"],this.socket.on("RoundStart",(function(t){console.log("Round ".concat(t.round," start")),e.newItem(t.name,t.image,t.round)})),this.socket.on("score",(function(t){e.players=t.newScore,e.answer=t.price,e.lastAnswers={};var s=!0,a=!1,r=void 0;try{for(var o,n=t.lastAnswers[Symbol.iterator]();!(s=(o=n.next()).done);s=!0){var i=o.value;e.lastAnswers[i.name]=i.answer}}catch(l){a=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}console.log("Updated scores")})),this.socket.on("clock",(function(t){e.time=t,console.log("Clock: ".concat(e.time)),0!==t||e.answered||(e.socket.emit("answer",0),console.log("Auto answer: 0"))})),this.socket.on("GameEnd",(function(){console.log("GameEnd"),e.showFinalResults=!0})),this.players=this.$store.state.game.players.map((function(e){return{name:e,score:0}}))},methods:{sendPrice:function(){this.estimatedPrice>0&&(this.answered=!0,this.socket.emit("answer",this.estimatedPrice),console.log("Send answer: ".concat(this.estimatedPrice)))},newItem:function(e,t,s){this.itemName=e,this.imageUrl="https://vincentroche-nodeproject-9.glitch.me/"+t,this.round=s,this.estimatedPrice="",this.answered=!1,this.answer=0,this.lastAnswers=[],this.time=this.$store.state.game.roundDuration,console.log("New item: ".concat(this.itemName))},ready:function(){this.socket.emit("ready"),console.log("Ready")},newGame:function(){},quit:function(){this.$store.commit("game/reset"),this.$router.push("/"),console.log("Round: quit")}},computed:{sortedPlayers:function(){return this.players.slice(0).sort((function(e,t){return t.score-e.score}))}}}),de=ue,me=s("cc20"),pe=s("169a"),ge=s("a797"),ve=s("490a"),he=Object(c["a"])(de,le,ce,!1,null,null,null),fe=he.exports;d()(he,{VBtn:g["a"],VCard:B["a"],VCardSubtitle:J["b"],VCardText:J["c"],VCardTitle:J["d"],VChip:me["a"],VCol:N["a"],VContainer:R["a"],VDialog:pe["a"],VImg:T["a"],VOverlay:ge["a"],VProgressCircular:ve["a"],VRow:I["a"],VSpacer:f["a"],VTextField:D["a"],VToolbar:z["a"],VToolbarItems:b["a"],VToolbarTitle:b["b"]});var be=s("2f62"),ye=(s("99af"),s("8055")),we=s.n(ye),xe={sessionId:null,username:null,gameSocket:null},_e=null,ke={isLoggedIn:function(e){return!!e.sessionId},gameSocket:function(){return _e}},Ce={},Ve={login:function(e,t){var s=t.sessionId,a=t.username;console.log("Vuex session login: ".concat(s,", ").concat(a)),e.sessionId=s,e.username=a,_e=we()("",{query:{sessionId:s}}),console.log("Vuex session gameSocket: ".concat(_e)),_e.on("disconnect",(function(){console.log("Socket disconnected"),e.sessionId=null,e.username=null,_e=null,console.warn("You have been disconnected because of connection issues with the server.")}))},logout:function(e){console.log("Vuex session logout"),e.sessionId=null,e.username=null,_e=null}},Se={namespaced:!0,state:xe,getters:ke,actions:Ce,mutations:Ve,gameSocket:_e},$e={rounds:0,roundDuration:0,players:[]},Pe={},Ge={},Ae={setGameSettings:function(e,t){var s=t.rounds,a=t.roundDuration;console.log("Vuex game setGameSettings: ".concat(s,", ").concat(a)),e.rounds=s,e.roundDuration=a},setPlayers:function(e,t){var s=t.players;console.log("Vuex game setPlayers: ".concat(s)),e.players=s},reset:function(e){console.log("Vuex game reset"),e.gameNumber=0,e.rounds=0,e.roundDuration=0,e.players=0}},je={namespaced:!0,state:$e,getters:Pe,actions:Ge,mutations:Ae};a["a"].use(be["a"]);var Ne=new be["a"].Store({modules:{session:Se,game:je}});a["a"].config.productionTip=!1,a["a"].use(r["a"]),a["a"].use(S.a,C.a);var Re=new r["a"]({routes:[{path:"/login",component:ee},{path:"/newAccount",component:Y},{path:"/lobby/:gameNumber",component:ie},{path:"/round",component:fe},{path:"*",component:O}]});new a["a"]({vuetify:_,router:Re,store:Ne,axios:C.a,render:function(e){return e(w)}}).$mount("#app"),document.title="Le Juste Prix"}});
//# sourceMappingURL=app.d4def59c.js.map